import streamlit as st
from utils.voice_utils import speak_text

def recommend_interface(insert_yojana): ##
    st.subheader("ЁЯУЛ рдЕрдкрдиреА рдЬрд╛рдирдХрд╛рд░реА рднрд░реЗрдВ рдФрд░ рдпреЛрдЬрдирд╛рдПрдБ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ")

    with st.form("recommend_form"):
        name = st.text_input("рдирд╛рдо")
        age = st.number_input("рдЙрдореНрд░", min_value=0)
        salary = st.number_input("рд╕рд╛рд▓рд╛рдирд╛ рдЖрдп (тВ╣)")
        state = st.selectbox("рд░рд╛рдЬреНрдп", ["рдЙрддреНрддрд░ рдкреНрд░рджреЗрд╢", "рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░", "рдмрд┐рд╣рд╛рд░", "рд░рд╛рдЬрд╕реНрдерд╛рди", "рдЕрдиреНрдп"])
        submit = st.form_submit_button("ЁЯОп рд╕реБрдЭрд╛рд╡ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ")

    if submit:
        recommendation = f"{name} рдЬреА, рдЖрдкрдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЖрдк {state} рд░рд╛рдЬреНрдп рдореЗрдВ рд░рд╣рдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВ рдФрд░ рдЖрдкрдХреА рдЙрдореНрд░ {age} рд╡рд░реНрд╖ рд╣реИред"
        if salary < 200000:
            recommendation += " рдЖрдк рдкреНрд░рдзрд╛рдирдордВрддреНрд░реА рдЬрди рдзрди рдпреЛрдЬрдирд╛, рдореБрджреНрд░рд╛ рд▓реЛрди рдпреЛрдЬрдирд╛, рдФрд░ рд╕реБрдХрдиреНрдпрд╛ рдпреЛрдЬрдирд╛ (рдпрджрд┐ applicable) рдХреЗ рд▓рд┐рдП рдкрд╛рддреНрд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред"
        else:
            recommendation += " рдЖрдк рдПрд▓рдЖрдИрд╕реА рдмреАрдорд╛ рдФрд░ рдПрдирдкреАрдПрд╕ рдЬреИрд╕реА рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдирд┐рд╡реЗрд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред"
        insert_yojana(name, age, salary, state, recommendation) ##
        st.success(recommendation)
        speak_text(recommendation)
